<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fitzgerald HR Assistant - Beta Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    
    <style>
        /* REMOVED Crisis Mode Pulse Animation */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in { animation: fadeIn 0.5s ease-out; }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .pulse { animation: pulse 2s ease-in-out infinite; }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 min-h-screen">
    
    <!-- Access Screen (unchanged) -->
    <div id="accessScreen" class="min-h-screen flex items-center justify-center p-6">
        <div class="max-w-md w-full fade-in">
            <div class="text-center mb-8">
                <div class="inline-block bg-gradient-to-r from-amber-500 to-orange-600 p-1 rounded-2xl mb-4">
                    <div class="bg-slate-900 px-8 py-4 rounded-xl">
                        <h1 class="text-3xl font-bold text-amber-500">FITZGERALD HR</h1>
                        <p class="text-slate-400 text-sm mt-1">AI-Powered Hospitality HR</p>
                    </div>
                </div>
                <h2 class="text-2xl font-bold text-white mb-2">Beta Testing Programme</h2>
                <p class="text-slate-400">Thank you for helping us test Australia's first AI-powered hospitality HR assistant</p>
            </div>

            <div class="bg-slate-800 rounded-2xl p-8 shadow-2xl border border-slate-700">
                <label class="block text-slate-300 font-medium mb-3">Enter Your Access Code</label>
                <input 
                    type="text" 
                    id="accessCodeInput"
                    placeholder="e.g., BETA-VENUE-001"
                    class="w-full bg-slate-900 border border-slate-600 rounded-lg px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:border-amber-500 focus:ring-2 focus:ring-amber-500/20 transition-all"
                    onkeypress="if(event.key==='Enter') checkAccess()"
                />
                <button 
                    onclick="checkAccess()"
                    class="w-full mt-4 bg-gradient-to-r from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 text-slate-900 font-bold py-3 px-6 rounded-lg transition-all transform hover:scale-105"
                >
                    Access Beta
                </button>
                <p id="accessError" class="text-red-400 text-sm mt-3 hidden"></p>
                
                <div class="mt-6 pt-6 border-t border-slate-700">
                    <p class="text-slate-500 text-xs text-center">
                        Don't have an access code? Contact us at<br/>
                        <a href="mailto:beta@fitzgeraldhr.com.au" class="text-amber-500 hover:underline">beta@fitzgeraldhr.com.au</a>
                    </p>
                </div>
            </div>

            <div class="mt-8 grid grid-cols-3 gap-4">
                <div class="bg-slate-800/50 border border-slate-700 rounded-xl p-4 text-center">
                    <div class="text-2xl mb-2">ü§ñ</div>
                    <p class="text-slate-400 text-xs">AI-Powered Guidance</p>
                </div>
                <div class="bg-slate-800/50 border border-slate-700 rounded-xl p-4 text-center">
                    <div class="text-2xl mb-2">üá¶üá∫</div>
                    <p class="text-slate-400 text-xs">Australian Hospitality</p>
                </div>
                <div class="bg-slate-800/50 border border-slate-700 rounded-xl p-4 text-center">
                    <div class="text-2xl mb-2">‚ö°</div>
                    <p class="text-slate-400 text-xs">24/7 Available</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Assistant Screen -->
    <div id="assistantScreen" class="hidden min-h-screen flex flex-col">
        <div class="bg-slate-800/80 backdrop-blur-sm border-b border-slate-700 px-6 py-4">
            <div class="max-w-5xl mx-auto flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-gradient-to-br from-amber-500 to-orange-600 rounded-lg flex items-center justify-center">
                        <span class="text-xl">üè®</span>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-white">Fitz - Your HR Assistant</h1>
                        <p class="text-xs text-slate-400">Beta Testing - <span id="userCode"></span></p>
                    </div>
                </div>
                <div class="flex items-center gap-3">
                    <!-- Crisis Mode Button - NO PULSE -->
                    <button onclick="activateCrisisMode()" 
                            class="px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg transition-all flex items-center gap-2">
                        <span class="text-xl">üö®</span>
                        <span>URGENT</span>
                    </button>
                    
                    <button onclick="toggleVoiceInput()" 
                            id="voiceButton"
                            class="p-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors">
                        <span id="voiceIcon">üé§</span>
                    </button>
                    
                    <div class="relative">
                        <button onclick="toggleToolsMenu()" 
                                class="p-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors">
                            <span>üõ†Ô∏è</span>
                        </button>
                        <div id="toolsMenu" class="hidden absolute right-0 top-12 bg-slate-800 border border-slate-700 rounded-lg shadow-xl w-64 z-50">
                            <div class="p-2">
                                <button onclick="openTool('awardCalculator')" class="w-full text-left px-4 py-3 hover:bg-slate-700 rounded-lg text-slate-200 flex items-center gap-3">
                                    <span>üí∞</span>
                                    <span>Award Calculator</span>
                                </button>
                                <button onclick="openTool('rosterOptimizer')" class="w-full text-left px-4 py-3 hover:bg-slate-700 rounded-lg text-slate-200 flex items-center gap-3">
                                    <span>üìÖ</span>
                                    <span>Roster Optimiser</span>
                                </button>
                                <button onclick="openTool('terminationRisk')" class="w-full text-left px-4 py-3 hover:bg-slate-700 rounded-lg text-slate-200 flex items-center gap-3">
                                    <span>‚öñÔ∏è</span>
                                    <span>Termination Risk</span>
                                </button>
                                <button onclick="openTool('scenarioAnalysis')" class="w-full text-left px-4 py-3 hover:bg-slate-700 rounded-lg text-slate-200 flex items-center gap-3">
                                    <span>üéØ</span>
                                    <span>Scenario Analysis</span>
                                </button>
                                <button onclick="openTool('xeroIntegration')" class="w-full text-left px-4 py-3 hover:bg-slate-700 rounded-lg text-slate-200 flex items-center gap-3">
                                    <span>üîó</span>
                                    <span>Xero Integration</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <button onclick="showFeedback()" class="text-amber-500 hover:text-amber-400 text-sm font-medium transition-colors">
                        Give Feedback
                    </button>
                    <button onclick="logout()" class="text-slate-400 hover:text-white text-sm transition-colors">
                        Logout
                    </button>
                </div>
            </div>
        </div>

        <div class="bg-amber-500/10 border-b border-amber-500/20 px-6 py-3">
            <div class="max-w-5xl mx-auto flex items-center gap-3">
                <span class="text-lg">‚ö†Ô∏è</span>
                <p class="text-amber-200 text-sm">
                    <strong>Beta Test:</strong> This is a preview. Please share honest feedback on your experience!
                </p>
            </div>
        </div>

        <div id="messagesContainer" class="flex-1 overflow-y-auto px-6 py-6">
            <div class="max-w-5xl mx-auto space-y-6">
                <!-- UPDATED Welcome Message -->
                <div class="flex justify-start">
                    <div class="max-w-3xl bg-slate-800 border border-slate-700 rounded-2xl px-6 py-4">
                        <p class="text-slate-100 leading-relaxed whitespace-pre-wrap">G'day! I'm Fitz, your AI assistant from Fitzgerald HR, specialised in hospitality HR for Australian venues.

I can help you with Fair Work compliance, award interpretation, employee relations, recruitment advice, and more.

<strong class="text-amber-400">üõ†Ô∏è Tools Available:</strong> Click the tools icon (üõ†Ô∏è) in the top right to access:
‚Ä¢ Award Calculator
‚Ä¢ Roster Optimiser
‚Ä¢ Termination Risk Assessor
‚Ä¢ Scenario Analysis
‚Ä¢ Xero Integration

<strong class="text-red-400">üö® Urgent/Critical Situations:</strong> Use the red URGENT button for immediate crisis response.

What HR challenge can I help you with today?

‚úâÔ∏è For personalised support, contact our Senior Consultants at info@fitzgeraldhr.com.au</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="bg-slate-800/30 border-t border-slate-700/50 px-6 py-3">
            <div class="max-w-5xl mx-auto">
                <div class="flex items-start gap-2 text-xs text-slate-400 mb-2">
                    <span class="text-amber-500">‚ö†Ô∏è</span>
                    <p>This AI assistant provides general guidance only. For complex matters or legal advice, consult with a Fitzgerald HR Senior Consultant.</p>
                </div>
                <div class="text-center">
                    <p class="text-sm text-slate-300">
                        <span class="text-amber-500 font-semibold">Contact us:</span> info@fitzgeraldhr.com.au
                    </p>
                </div>
            </div>
        </div>

        <div class="bg-slate-800/80 backdrop-blur-sm border-t border-slate-700 px-6 py-4">
            <div class="max-w-5xl mx-auto flex gap-3">
                <textarea
                    id="messageInput"
                    placeholder="Ask me anything about hospitality HR in Australia..."
                    class="flex-1 bg-slate-900 border border-slate-600 rounded-lg px-4 py-3 text-white placeholder-slate-400 focus:outline-none focus:border-amber-500 resize-none"
                    rows="2"
                    onkeypress="if(event.key==='Enter' && !event.shiftKey) { event.preventDefault(); sendMessage(); }"
                ></textarea>
                <button
                    onclick="sendMessage()"
                    id="sendButton"
                    class="px-6 py-3 bg-amber-500 hover:bg-amber-600 disabled:bg-slate-700 disabled:cursor-not-allowed text-slate-900 font-medium rounded-lg transition-colors flex items-center gap-2"
                >
                    <span>Send</span>
                    <span>‚Üí</span>
                </button>
            </div>
        </div>
    </div>

    <!-- All modals remain the same, just updating the Roster modal title -->
    <!-- Crisis Mode Modal -->
    <div id="crisisModal" class="hidden fixed inset-0 bg-red-900/90 backdrop-blur-sm flex items-center justify-center p-6 z-50">
        <div class="bg-slate-800 rounded-2xl p-8 max-w-2xl w-full border-4 border-red-500 fade-in">
            <div class="text-center mb-6">
                <div class="text-6xl mb-4 animate-bounce">üö®</div>
                <h2 class="text-3xl font-bold text-red-400 mb-2">CRISIS MODE ACTIVATED</h2>
                <p class="text-slate-300">Emergency HR support - Immediate response</p>
            </div>
            
            <div class="space-y-4 mb-6">
                <div>
                    <label class="block text-slate-300 font-medium mb-2">What's the urgent situation?</label>
                    <select id="crisisType" class="w-full bg-slate-900 border border-slate-600 rounded-lg px-4 py-3 text-white">
                        <option value="">Select crisis type...</option>
                        <option value="injury">Workplace Injury</option>
                        <option value="harassment">Sexual Harassment / Bullying</option>
                        <option value="theft">Theft / Serious Misconduct</option>
                        <option value="walkout">Employee Walkout / Strike</option>
                        <option value="discrimination">Discrimination Complaint</option>
                        <option value="violence">Workplace Violence / Threat</option>
                        <option value="death">Death / Medical Emergency</option>
                        <option value="other">Other Urgent Matter</option>
                    </select>
                </div>

                <div>
                    <label class="block text-slate-300 font-medium mb-2">Describe what happened (be specific):</label>
                    <textarea id="crisisDescription" rows="4" 
                              class="w-full bg-slate-900 border border-slate-600 rounded-lg px-4 py-3 text-white placeholder-slate-400"
                              placeholder="Provide details: who, what, when, where..."></textarea>
                </div>

                <div>
                    <label class="block text-slate-300 font-medium mb-2">Your contact number for urgent callback:</label>
                    <input type="tel" id="crisisPhone" 
                           class="w-full bg-slate-900 border border-slate-600 rounded-lg px-4 py-3 text-white"
                           placeholder="04XX XXX XXX">
                </div>
            </div>

            <div class="bg-red-500/10 border-2 border-red-500 rounded-lg p-4 mb-6">
                <p class="text-red-300 font-bold mb-2">üö® IMMEDIATE ACTIONS:</p>
                <ul class="text-red-200 text-sm space-y-1 ml-4">
                    <li>‚Ä¢ Document everything NOW (photos, witnesses, times)</li>
                    <li>‚Ä¢ Do NOT investigate yourself</li>
                    <li>‚Ä¢ Separate involved parties immediately</li>
                    <li>‚Ä¢ Preserve evidence / CCTV footage</li>
                    <li>‚Ä¢ Contact emergency services if needed (000)</li>
                </ul>
            </div>

            <div class="flex gap-3">
                <button onclick="submitCrisis()" 
                        class="flex-1 bg-red-600 hover:bg-red-700 text-white font-bold py-4 px-6 rounded-lg transition-all text-lg">
                    üö® GET URGENT HELP NOW
                </button>
                <button onclick="closeCrisisModal()" 
                        class="px-6 py-4 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-all">
                    Cancel
                </button>
            </div>

            <p class="text-center text-slate-400 text-sm mt-4">
                A Senior Consultant will contact you within 15 minutes
            </p>
        </div>
    </div>

    <!-- Other modals omitted for brevity but remain unchanged -->
    
    <script>
        // All JavaScript from original file remains the same
        // Just the welcome message content changes when displayed
        
        const VALID_CODES = [
            'BETA-VENUE-001',
            'BETA-VENUE-002',
            'BETA-VENUE-003',
            'BETA-VENUE-004',
            'BETA-VENUE-005',
            'FITZGERALD-TEST',
            'DEMO-2025'
        ];

        let currentUser = null;
        let conversationHistory = [];
        let feedbackRating = 0;

        function checkAccess() {
            const input = document.getElementById('accessCodeInput').value.trim().toUpperCase();
            const error = document.getElementById('accessError');
            
            if (VALID_CODES.includes(input)) {
                currentUser = input;
                document.getElementById('userCode').textContent = input;
                document.getElementById('accessScreen').classList.add('hidden');
                document.getElementById('assistantScreen').classList.remove('hidden');
                error.classList.add('hidden');
                trackEvent('beta_access', { code: input });
            } else {
                error.textContent = 'Invalid access code. Please check and try again.';
                error.classList.remove('hidden');
            }
        }

        // All other functions remain exactly the same
        // (sendMessage, addMessage, callClaudeAPI, etc.)
    </script>
</body>
</html>
